{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "title": "MessageParseTextToForeign",
  "required": ["input"],
  "properties": {
    "input": {
      "type": "object",
      "required": ["name", "data"],
      "properties": {
        "name": {
          "type": "string",
          "const": "parseTextToForeign"
        },
        "data": {
          "type": "object",
          "properties": {
            "text": {
              "type": "string"
            },
            "nativeLanguages": {
              "$ref": "./Property.schema.json#/$defs/nativeLanguages"
            },
            "primaryForeignLanguage": {
              "$ref": "./Property.schema.json#/$defs/primaryForeignLanguage"
            }
          },
          "required": ["text", "nativeLanguages", "primaryForeignLanguage"]
        }
      }
    },
    "output": {
      "type": "object",
      "description": "The result of parsing the text for futher translation.",
      "required": ["translationChoices"],
      "properties": {
        "translationChoices": {
          "type": "array",
          "description": "The list of possible translations. It should include not only direct translations, but also different ways of saying that. As if answering the question: 'How to say {data.text} in {data.primaryForeignLanguage}'? The first item in the list should be the best fitting the original context from the user input text that was sent for this parsing. Each translations should come in an array, split into grammatical parts. It is a 'reverse' translation, meaning that the `text` property should have the translated part in `primaryForeignLanguage` language",
          "items": {
            "type": "object",
            "required": ["definitionParts", "translation"],
            "description": "A translation choice with the split definition parts and the full translation.",
            "properties": {
              "definitionParts": {
                "type": "array",
                "description": "Split the text into grammatical parts. A part should be a dictionary entry like a single word or a famous phrase, it is something that can be defined or translated. Do not include symbols, unless they are the integral part of a phrase.",
                "items": {
                  "type": "object",
                  "required": ["text", "language"],
                  "properties": {
                    "text": {
                      "type": "string",
                      "description": "The text of the foreign language translation part split. Keep this part small, it should not be longer than a typical dictionary entry point. Do not include any punctuation symbols, enclosing parentheses or apostrophes an so on."
                    },
                    "translationToNative": {
                      "type": "string",
                      "description": "A short translation of the definition part without additional formatting. Among several translation choices, choose the one that is the best fitting the original context from the user input text that was sent for this parsing."
                    },
                    "languageForeign": {
                      "type": "string",
                      "description": "The BCP 47 language tag of the translation language. It should match the requested 'primaryForeignLanguage'."
                    },
                    "languageNative": {
                      "type": ["string", "null"],
                      "description": "The BCP 47 language tag of the native language matching the part of the original text. Null for unknown"
                    }
                  }
                }
              },
              "translation": {
                "type": "object",
                "required": ["text", "language"],
                "description": "The full translation of the text to the requested language.",
                "properties": {
                  "text": {
                    "type": "string"
                  },
                  "language": {
                    "type": "string",
                    "description": "The BCP 47 language tag of the language of the translation. It should match the requested 'primaryForeignLanguage'"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
